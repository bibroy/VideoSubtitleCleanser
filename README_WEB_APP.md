# VideoSubtitleCleanser Web Application

## Overview

The VideoSubtitleCleanser Web Application provides a user-friendly interface for generating ASS subtitle files with customizable features. This web interface offers all the powerful functionality of the CLI version with an intuitive drag-and-drop interface.

## Features

- **Direct Video to ASS Conversion**: Upload video files and convert them directly to ASS subtitle format
- **Intelligent Positioning**: Automatically positions subtitles to avoid overlaying important content in videos
- **Complete Font Styling Control**: Customize font name, size, colors, bold/italic formatting, and outline/shadow effects
- **Multiple Transcription Options**: Choose between AWS Transcribe, OpenAI Whisper, or automatic selection
- **Speaker Diarization**: Identify different speakers in the video with proper formatting (using -- for speaker changes)
- **Grammar Correction**: Optional grammar and spelling correction for generated subtitles
- **Translation Support**: Translate subtitles to multiple languages using AWS Translate
- **PotPlayer Compatibility**: Generated ASS files work perfectly with PotPlayer and other advanced media players

## Getting Started

### Prerequisites

- Python 3.8 or higher
- Required Python packages (see `requirements.txt`)
- AWS credentials (optional, for AWS Transcribe and Translate features)

### Running the Web Application

1. Open a command prompt or terminal
2. Navigate to the VideoSubtitleCleanser directory
3. Run the start script:

```
start_web_app.bat
```

This will:
- Start the web server on port 5000
- Automatically open your web browser to the application interface
- Create necessary directories for uploads and outputs

### Using the Web Interface

1. **Upload a Video File**:
   - Drag and drop a video file onto the upload area
   - Or click "Browse Files" to select a video file

2. **Configure Subtitle Generation Options**:
   - **Transcription Settings**:
     - Source Language: Select the language spoken in the video
     - Transcription Tool: Choose AWS Transcribe, Whisper, or Auto (AWS with Whisper fallback)
     - Speaker Diarization: Enable to identify different speakers
     - Grammar Correction: Enable to correct grammar and spelling
     - Detect Text in Video: Enable to reposition subtitles to avoid overlaying text

   - **Translation Settings**:
     - Target Language: Select a language to translate the subtitles to (optional)

   - **Font Style Settings**:
     - Font Name: Select from common subtitle fonts
     - Font Size: Set the size of the subtitle text
     - Text Color: Choose the primary color for subtitle text
     - Outline Color: Choose the color for text outlines
     - Background Color: Choose the color for text background
     - Bold/Italic: Toggle bold or italic formatting
     - Outline Thickness: Set the thickness of text outlines
     - Shadow Depth: Set the depth of text shadows

3. **Generate Subtitle**:
   - Click the "Generate Subtitle" button
   - Wait for the processing to complete (this may take some time depending on the video length)

4. **Download the Result**:
   - Once processing is complete, click "Download Subtitle" to save the ASS file
   - The ASS file can be used with compatible video players like PotPlayer, MPC-HC, and MPV

## Advanced Features

### Intelligent Positioning

The web application uses the same intelligent positioning system as the CLI version:
- Cue4 (special subtitle) is positioned at the top to avoid overlaying important content
- Regular subtitles are positioned at the bottom
- When text is detected in the video, subtitles are repositioned to avoid overlapping

### Font Styling for PotPlayer

The ASS files generated by the web application are fully compatible with PotPlayer and provide complete styling control:
- Custom font selection
- Size adjustment
- Color customization (including transparency)
- Bold/italic formatting
- Outline and shadow effects

## Troubleshooting

### Server Not Starting

If the web server fails to start:
1. Check that all required Python packages are installed
2. Ensure port 5000 is not in use by another application
3. Check the console output for specific error messages

### AWS Features Not Working

If AWS Transcribe or Translate features are not working:
1. Ensure AWS credentials are properly configured in `.env` or `backend.config`
2. Check that the required AWS permissions are set up
3. The application will automatically fall back to Whisper if AWS is unavailable

## Additional Resources

- See `README.md` for general information about VideoSubtitleCleanser
- See `README_CLI.md` for information about the command-line interface
- See `Run.md` for detailed information about ASS subtitle format and font styling options
